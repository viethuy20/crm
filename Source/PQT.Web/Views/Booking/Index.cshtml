
<section>
    <div class="row">
        <div class="col-md-12">
            <div class="card  card-underline">
                <div class="card-head">
                    <header>Bookings</header>
                </div>
                <div class="card-body">
                    <table class="table" id="bookingTable">
                        <thead>
                            <tr>
                                <th>Date Created</th>
                                <th>Company</th>
                                <th>Address</th>
                                <th>Tel</th>
                                <th>Fax</th>
                                <th>Authoriser</th>
                                <th>Sender</th>
                                <th>Event</th>
                                <th>Salesman</th>
                                <th>Fee per delegate</th>
                                <th>Discount</th>
                                <th>Revenue amount</th>
                                <th>Total Paid Revenue</th>
                                <th>Status</th>
                                <th>&nbsp;</th>
                            </tr>
                        </thead>
                    </table>
                </div><!--end .card-body -->
            </div><!--end .card -->
        </div>
    </div>
</section>


@Html.Script(

    @<script>
         $(document).unbind('ajaxStart');
         var windowW = $(window).width();
         var windowH = $(window).height();
         var fixedColumn = 0;
         var sizeLenght = 50;


         var oTable = $("#bookingTable");
         oTable.dataTable({
             "processing": true, // for show progress bar
             "serverSide": true, // for process server side
             "filter": true, // this is for disable filter (search box)
             "orderMulti": false, // for disable multiple column at once
             "stateSave": false,
             "ajax": {
                 "url": "@Url.Action("AjaxGetBookings")?",
                 "type": "POST",
                 "datatype": "json",
                 "data": function(d) {
                 }
             },
             "columns": [
                 { "data": "CreatedTime", "name": "CreatedTime", "orderable": true },
                 { "data": "Company", "name": "Company", "orderable": true },
                 { "data": "Address", "name": "Address", "orderable": true },
                 { "data": "Tel", "name": "Tel", "orderable": true },
                 { "data": "Fax", "name": "Fax", "orderable": true },
                 { "data": "Authoriser", "name": "Authoriser", "orderable": true },
                 { "data": "Sender", "name": "Sender", "orderable": true },
                 { "data": "Event", "name": "Event", "orderable": true },
                 { "data": "Salesman", "name": "Salesman", "orderable": true },
                 { "data": "FeePerDelegate", "name": "FeePerDelegate", "orderable": true },
                 { "data": "Discount", "name": "Discount", "orderable": true },
                 { "data": "RevenueAmount", "name": "RevenueAmount", "orderable": true },
                 { "data": "TotalPaidRevenue", "name": "TotalPaidRevenue", "orderable": true },
                 { "data": "Status", "name": "Status", "orderable": true },
                 { "data": "ID", "name": "ID", "orderable": false },
             ],
             "iDisplayLength": sizeLenght,
             "aaSorting": [[1, "desc"]],
             "fnRowCallback": function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                 $(nRow).find('td:eq(0)').html('<a href="@Url.Action("Details")/' +
                     aData["ID"] +
                     '">' +
                     aData["CreatedTime"] +
                     '</a>');
                 $(nRow).find('td:eq(14)').html('<a class="simple-ajax-popup-align-top" href="@Url.Action("Action")/' +
                     aData["ID"] + '" ><span class=" text-primary" style="white-space: nowrap;"><i class="md fa-fw md-view-headline"></i> Action<span></a>');

             },
             scrollY: false,
             scrollX: true,
             "bScrollCollapse": false,
         });
         $(document).on("click", ".paginate_button", function () {
             fixedColumn = 0;
         });
         $(document).on("change", "select[name=table_length]", function () {
             fixedColumn = 0;
         });

     </script>

)

@Html.Script(
    @<script>
        $(document).on('click', '.btnApprove', function (e) {
             e.preventDefault();
             var $sefl = $(this);
            bootbox.confirm("Are you sure you want to approve this booking?", function(isOK) {
                if (isOK) {
                    location.href = $sefl.attr('href');
                }
            });
        });
        $(document).on('click', '.btnReject', function (e) {
             e.preventDefault();
             var $sefl = $(this);
            bootbox.confirm("Are you sure you want to reject this booking?", function(isOK) {
                if (isOK) {
                    $sefl.closest('form').submit();
                }
            });
        });
     </script>
)