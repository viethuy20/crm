@using Resources
@model PQT.Web.Models.EventModel

@{
    ViewBag.Title = "Event Detail";
}

<section>

    <div class="row section-header" style="height: auto">
        <h2 class="text-primary col-sm-3">@ViewBag.Title</h2>
    </div>
    <div class="row">
        <div class="col-sm-12" style="padding-right: 24px; padding-bottom: 12px">
            @Html.Bootstrap().ActionLinkButton(Resource.ButtonBackToList, "Index").PrependIcon("md md-arrow-back")
            @if (CurrentUser.HasPermission("Event", "Edit"))
            {
                @Html.Bootstrap().ActionLinkButton("Edit", "Edit").RouteValues(new {id = Model.Event.ID}).Class("btn-primary").PrependIcon("md md-edit")
            }
        </div>
    </div>
    <div class="card">
        <div class="card-body form">
            <div class="row">
                <div class="col-sm-6">
                    <div class="form-group">
                        @Html.Bootstrap().TextBoxFor(m => m.Event.EventCode).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.EventCode).LabelText("EVENT CODE")
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="form-group">
                        @Html.Bootstrap().TextBoxFor(m => m.Event.EventName).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.EventName).LabelText("EVENT NAME")
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="form-control" readonly name="@Html.FieldNameFor(m=>m.Event.StartDate)">
                            @Model.Event.StartDate.ToString("dd MMM yyyy")
                        </div>
                        @Html.Bootstrap().LabelFor(m => m.Event.StartDate).LabelText("Start Date")
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        <div class="form-control" readonly name="@Html.FieldNameFor(m=>m.Event.EndDate)">
                            @Model.Event.EndDate.ToString("dd MMM yyyy")
                        </div>
                        @Html.Bootstrap().LabelFor(m => m.Event.EndDate).LabelText("End Date")
                    </div>
                </div>
                <div class="col-sm-4">
                    <div class="form-group">
                        @Html.Bootstrap().TextBoxFor(m => m.Event.BackgroundColor).HtmlAttributes(new { @style = "color:#fff;background:" + Model.Event.BackgroundColor }).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.BackgroundColor).LabelText("EVENT COLOR")
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        @Html.Bootstrap().TextBoxFor(m => m.Event.CallFilterKeywords).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.CallFilterKeywords).LabelText("CALL KEYWORDS")
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        @Html.Bootstrap().TextAreaFor(m => m.Event.ShortDescription).Rows(4).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.ShortDescription).LabelText("Short Description")
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="form-group">
                        @Html.Bootstrap().TextAreaFor(m => m.Event.Description).Rows(7).Class("form-control").Disabled().ShowValidationMessage(true)
                        @Html.Bootstrap().LabelFor(m => m.Event.Description).LabelText("Description")
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="card card-underline">
        <div class="card-head">
            <header>Companies</header>
        </div>
        <div class="card-body">
            <div class="row">
                <table class="table no-margin" id="grid_companies">
                    <thead>
                    <tr>
                        <th>Country</th>
                        <th>Company</th>
                        <th>Product/Service</th>
                        <th>Sector</th>
                        <th>Industry</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var phonecall in Model.Event.Companies)
                    {
                        <tr>
                            <td>@phonecall.CountryName (@phonecall.CountryCode)</td>
                            <td>@phonecall.CompanyName</td>
                            <td>@phonecall.ProductOrService</td>
                            <td>@phonecall.Sector</td>
                            <td>@phonecall.Industry</td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div><!--end .card-body -->
    </div>
    <div class="card card-underline">
        <div class="card-head">
            <header>Sales Group</header>
        </div>
        <div class="card-body">
            <div class="row">
                <table class="table no-margin">
                    <thead>
                    <tr>
                        <th>Group Name</th>
                        <th>Salesman</th>
                    </tr>
                    </thead>
                    <tbody>
                    @foreach (var phonecall in Model.Event.SalesGroups)
                    {
                        <tr>
                            <td>@phonecall.GroupName</td>
                            <td>@string.Join("; ", phonecall.Users.Select(m=>m.DisplayName))</td>
                        </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div><!--end .card-body -->
    </div>
    <div class="card card-underline">
        <div class="card-head">
            <header>Event Sessions</header>
        </div>
        <div class="card-body">
            <div class="row">
                <table class="table no-margin">
                    <thead>
                    <tr>
                        <th>Session Title</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Trainer Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    @{
                        foreach (var item in Model.Event.EventSessions)
                        {
                            <tr>
                                <td>
                                    @item.SessionTitle
                                </td>
                                <td>
                                    @item.StartDate.ToString("dd MMM yyyy")
                                </td>
                                <td>
                                    @item.EndDate.ToString("dd MMM yyyy")
                                </td>
                                <td>
                                    @item.TrainerName
                                </td>
                            </tr>
                        }
                    }
                    </tbody>
                </table>
            </div>
        </div><!--end .card-body -->
    </div>
</section>

@Html.Script(
    @<script>
         var $Table = $('#grid_companies').dataTable({
             "iDisplayLength": 25
         });
     </script>)